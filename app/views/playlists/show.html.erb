<div class="container">
  <div class="container-description">
    <div class="img-playlist-des">
      <%= cl_image_tag @playlist.picture, width: 320, height: 225, crop: :fill %>
    </div>
    <div class="playlist-des">
      <h4><%= @playlist.name  %></h4>
      <p><b>Description:</b> <%= @playlist.description  %></p>
      <p><b>Owner:</b> <%= link_to @playlist.user.username, user_path(@playlist.user)  %></p>
      <% if current_user.followed_playlists.where(playlist: @playlist).empty? %>
        <%= link_to user_followed_playlists_path(current_user, :@playlist => @playlist), method: :post  do %>
          <button id="main_cta">Add to Favourites</button>
        <% end %>
      <% else %>
       <%= link_to user_followed_playlist_path(current_user, current_user.followed_playlists.where(playlist: @playlist)[0]), method: :delete  do %>
          <button id="main_cta">Stop Following</button>
        <% end %>
      <% end %>
    </div>
  </div>
  <div class="container-playlist-show">
    <% @movies.each do |movie| %>
    <div class="card-movie-playlist">
      <%= link_to movie_path(movie) do  %>
        <div class="movie-cover-playlist">
         <%= cl_image_tag movie.poster, width: 200, height: 250, crop: :fill %>
        </div>
      <% end %>
      <div class="title-movie">
        <div class="title-movie-value">
          <p class="font-weight-bold "><%=h truncate(movie.title, :length => 40) %></p>
        </div>
        <p class="text-truncate" style="max-width: 180px;">By <%= movie.director %></p>
        <div class="rating-trash">
          <% if movie.rating == 0 %>
            <p><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></p>
          <% elsif movie.rating == 1 %>
            <p><i class="fas fa-star yellow-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></p>
          <% elsif movie.rating == 2 %>
            <p><i class="fas fa-star yellow-star"></i><i class="fas fa-star yellow-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></p>
          <% elsif movie.rating == 3 %>
            <p><i class="fas fa-star yellow-star"></i><i class="fas fa-star yellow-star"></i><i class="fas fa-star yellow-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></p>
          <% elsif movie.rating == 4 %>
            <p>fas fa-star yellow-star"></i><i class="fas fa-star yellow-star"></i><i class="fas fa-star yellow-star"></i><i class="fas fa-star yellow-star"></i><i class="fas fa-star"></i></p>
          <% else %>
            <p>fas fa-star yellow-star"></i><i class="fas fa-star yellow-star"></i><i class="fas fa-star yellow-star"></i><i class="fas fa-star yellow-star"></i><i class="fas fa-star"></i></p>
          <% end %>
          <% if @playlist.user == current_user %>
            <p><%= link_to '', movie_movie_playlist_path(movie, @playlist), method: :delete, :class => "fas fa-trash-alt"  %></p>
          <% end %>
        </div>
      </div>
    </div>
    <% end %>
  </div>
</div>

